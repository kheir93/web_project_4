!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){var n=e.baseUrl,r=e.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._headers=r}var n,r;return n=t,(r=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))}},{key:"getAppInfo",value:function(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}},{key:"getUserInfo",value:function(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then(this._checkResponse)}},{key:"setUserInfo",value:function(e,t){return fetch(this._baseUrl+"/users/me/",{method:"PATCH",headers:this._headers,body:JSON.stringify(e,t)}).then(this._checkResponse)}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then(this._checkResponse)}},{key:"newCard",value:function(e){var t=e.title,n=e.url;return fetch(this._baseUrl+"/cards",{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:n})}).then(this._checkResponse)}},{key:"removeCard",value:function(e){return fetch(this._baseUrl+"/cards/"+e,{headers:this._headers,method:"DELETE"}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"removeLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._defaultFormConfig=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._defaultFormConfig.inputSelector)),this._buttonElement=this._formElement.querySelector(this._defaultFormConfig.formSubmit)}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._defaultFormConfig.inputErrorClass),n.classList.add(this._defaultFormConfig.errorClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._defaultFormConfig.inputErrorClass),t.classList.remove(this._defaultFormConfig.errorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){if(!e.validity.valid)return this._showInputError(e,e.validationMessage);this._hideInputError(e)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?this.disableButton():this.enableButton()}},{key:"disableButton",value:function(){this._buttonElement.classList.add(this._defaultFormConfig.formSubmitInactive),this._buttonElement.disabled=!0}},{key:"enableButton",value:function(){this._buttonElement.classList.remove(this._defaultFormConfig.formSubmitInactive),this._buttonElement.disabled=!1}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this.resetValidation(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var e=this;this._formElement.addEventListener("reset",(function(){setTimeout((function(){e._toggleButtonState()})),e._inputList.forEach((function(t){e._hideInputError(t)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n,r){var o=t.data,i=t.handleCardImage,a=t.cardDelete,u=t.deleteModal,c=t.likeOwner;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._likeOwner=c,this._handleCardImage=i,this._cardDelete=a,this._deleteModal=u,this._cardTemplate=n,this._cardElement=this._getTemplate(),this._userId=r,this._link=o.link,this._name=o.name,this._likes=o.likes,this._id=o._id,this._owner=o.owner,this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__caption"),this._cardLike=this._cardElement.querySelector(".card__like-icon"),this._deleteButton=this._cardElement.querySelector(".card__delete"),this.cardLikeActive="card__like-icon_active"}var t,n;return t=e,(n=[{key:"getId",value:function(){return this._id}},{key:"likeOwner",value:function(){var e=this;if(this._likes.some((function(t){return t._id===e._userId})))return this._cardLike.classList.add(this.cardLikeActive)}},{key:"likesCount",value:function(e){this._cardElement.querySelector(".card__like-count").textContent=e}},{key:"handleCardLike",value:function(){var e=this;this._cardLike.addEventListener("click",(function(){e._likeOwner(e.getId())}))}},{key:"isLiked",value:function(){return this._cardLike.classList.contains(this.cardLikeActive)}},{key:"_getTemplate",value:function(){return this._cardElement=document.querySelector(this._cardTemplate).content.querySelector(".card").cloneNode(!0),this._cardElement}},{key:"_setEventListeners",value:function(){var e=this;this._cardImage.addEventListener("click",(function(){e._handleCardImage()})),this.handleCardDelete(),this.handleCardLike()}},{key:"removeCard",value:function(){this._cardElement.remove(".card")}},{key:"handleCardDelete",value:function(){var e=this;this._deleteButton.addEventListener("click",(function(t){t.preventDefault(),e._cardDelete(e.getId())}))}},{key:"generateCard",value:function(){return this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this.handleCardLike(),this.hideBin(),this.likesCount(this._likes.length),this.likeOwner(),this._setEventListeners(),this._cardElement}},{key:"addLike",value:function(){this._cardLike.classList.add(this.cardLikeActive)}},{key:"removeLike",value:function(){this._cardLike.classList.remove(this.cardLikeActive)}},{key:"hideBin",value:function(){this._owner._id!==this._userId&&(this._deleteButton=this._cardElement.querySelector(".card__delete"),this._deleteButton.style.display="none")}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscUp=this._handleEscUp.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscUp",value:function(e){if(e.preventDefault(),"Escape"===e.key)return this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){if(t.target.classList.contains("popup__close-button")||t.target.classList.contains("popup"))return e.close()}))}},{key:"open",value:function(){this._popupElement.classList.add("popup_open"),document.addEventListener("keyup",this._handleEscUp)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_open"),document.removeEventListener("keyup",this._handleEscUp)}}])&&a(t.prototype,n),e}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function a(e,t){var n,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._handleFormSubmit=r,n._popupForm=n._popupElement.querySelector(".form"),n._inputList=n._popupElement.querySelectorAll(".form__input"),n._submitButton=n._popupElement.querySelector(".form__save"),n._initialText=n._submitButton.textContent,n}return t=a,(n=[{key:"loading",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._initialText}},{key:"getInputValues",value:function(){var e=this;return this._inputValues={},this._inputList.forEach((function(t){return e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setEventListeners",value:function(){var e=this;this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e.getInputValues())})),s(h(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){s(h(a.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"submitHandler",value:function(e){this._handleFormSubmit=e}}])&&l(t.prototype,n),a}(u);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._link=t._popupElement.querySelector(".place-modal__image"),t._title=t._popupElement.querySelector(".place-modal__caption"),t}return t=a,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;this._link.src=t,this._link.alt=n,this._title.textContent=n,v(k(a.prototype),"open",this).call(this)}}])&&m(t.prototype,n),a}(u);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector("".concat(n))}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&E(t.prototype,n),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n,this._about=r,this._avatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{profileName:this._name.textContent,profileAbout:this._about.textContent,profileAvatar:this._avatar.src}}},{key:"setUserInfo",value:function(e,t,n){this._name.textContent=e,this._about.textContent=t,this.setUserAvatar({avatar:n})}},{key:"setUserAvatar",value:function(e){var t=e.avatar;this._avatar.src=t}}])&&L(t.prototype,n),e}(),C={popupSelector:".popup",formSelector:".form",formSubmit:".form__save",inputSelector:".form__input",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active",formSubmitInactive:"form__save_inactive"},I=(document.querySelector(".place-modal__image"),document.querySelector(".place-modal__caption"),document.querySelector(".avatar-modal")),O=document.querySelector(".edit-modal"),q=document.querySelector(".add-modal"),U=(document.querySelector(".delete-modal"),document.querySelector(".form__input_avatar"),document.querySelector(".form__input_name")),j=document.querySelector(".form__input_job"),T=(document.querySelector(".form__input_image"),document.querySelector(".form__input_title"),document.querySelector(".form__save"),document.querySelector(".place-modal"),document.querySelector(".profile__avatar-button")),P=document.querySelector(".profile__edit-button"),A=document.querySelector(".profile__avatar"),R=document.querySelector(".profile__name"),B=document.querySelector(".profile__about"),F=document.querySelector(".profile__add-button");function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}document.querySelector(".popup"),document.querySelector(".cardTemplate"),document.querySelector(".card"),document.querySelector(".card__image"),document.querySelector(".card__caption"),document.querySelector(".card__delete"),document.querySelector(".elements");var D=new t({baseUrl:"https://around.nomoreparties.co/v1/group-13",headers:{authorization:"4b9bb316-6c12-461f-86a3-76e6af7325ba","Content-Type":"application/json"}}),V=new r(C,I),N=new r(C,O),H=new r(C,q);N.enableValidation(),H.enableValidation(),V.enableValidation();var M=new w({name:R,about:B,avatar:A}),J=new p({handleFormSubmit:function(e){J.loading(!0),D.setUserInfo({name:e.name,about:e.about}).then((function(e){M.setUserInfo(e.name,e.about,e.avatar),J.loading(!1,"loaded!!!"),J.close()})).catch((function(e){return console.log(e)}))}},".edit-modal"),z=new p({handleFormSubmit:function(e){z.loading(!0),D.setUserAvatar({avatar:e.avatar}).then((function(e){M.setUserAvatar(e),z.loading(!1,"loaded!!!"),z.close()})).catch((function(e){return console.log(e)}))}},".avatar-modal"),$=new p({},".delete-modal");$.setEventListeners(),z.setEventListeners(),J.setEventListeners(),T.addEventListener("click",(function(){z.open(),z.loading(!1)})),P.addEventListener("click",(function(){J.open(),J.loading(!1);var e=M.getUserInfo();U.value=e.profileName,j.value=e.profileAbout}));var G=new g(".place-modal");G.setEventListeners(),D.getAppInfo().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],u=o._id;M.setUserInfo(o.name,o.about),M.setUserAvatar(o);var c=new S({data:a,renderer:s},".elements");c.renderItems();var l=new p({handleFormSubmit:function(e){l.loading(!0),D.newCard(e).then((function(e){s(e),l.loading(!1,"Saved"),l.close()})).catch((function(e){return console.log(e)}))}},".add-modal");function s(e){var t=new i({data:e,handleCardImage:function(){G.open(e)},cardDelete:function(e){$.open(),$.submitHandler((function(){$.loading(!0,"Deleting..."),D.removeCard(e).then((function(){t.removeCard(),$.loading(!1),$.close()})).catch((function(e){return console.log(e)}))}))},likeOwner:function(e){t.isLiked()?D.removeLike(e).then((function(e){t.likesCount(e.likes.length),t.removeLike()})).catch((function(e){return console.log(e)})):D.addLike(e).then((function(e){t.likesCount(e.likes.length),t.addLike()})).catch((function(e){return console.log(e)}))}},"#cardTemplate",u);c.addItem(t.generateCard())}l.setEventListeners(),F.addEventListener("click",(function(){l.open(),l.loading(!1)}))})).catch((function(e){return console.log(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvYXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9wb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAtd2l0aC1mb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC13aXRoLWltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsIm5hbWUiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXZhdGFyIiwidGl0bGUiLCJ1cmwiLCJsaW5rIiwiY2FyZElkIiwiZGVmYXVsdEZvcm1Db25maWciLCJmb3JtRWxlbWVudCIsIl9kZWZhdWx0Rm9ybUNvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImZvcm1TdWJtaXQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImVuYWJsZUJ1dHRvbiIsImZvcm1TdWJtaXRJbmFjdGl2ZSIsImRpc2FibGVkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwicmVzZXRWYWxpZGF0aW9uIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2V0VGltZW91dCIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQ2FyZCIsImNhcmRUZW1wbGF0ZSIsInVzZXJJZCIsImRhdGEiLCJoYW5kbGVDYXJkSW1hZ2UiLCJjYXJkRGVsZXRlIiwiZGVsZXRlTW9kYWwiLCJsaWtlT3duZXIiLCJfbGlrZU93bmVyIiwiX2hhbmRsZUNhcmRJbWFnZSIsIl9jYXJkRGVsZXRlIiwiX2RlbGV0ZU1vZGFsIiwiX2NhcmRUZW1wbGF0ZSIsIl9jYXJkRWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl91c2VySWQiLCJfbGluayIsIl9uYW1lIiwiX2xpa2VzIiwibGlrZXMiLCJfaWQiLCJfb3duZXIiLCJvd25lciIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwiX2NhcmRMaWtlIiwiX2RlbGV0ZUJ1dHRvbiIsImNhcmRMaWtlQWN0aXZlIiwidG90YWwiLCJnZXRJZCIsImNvbnRhaW5zIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiaGFuZGxlQ2FyZERlbGV0ZSIsImhhbmRsZUNhcmRMaWtlIiwiZSIsInNyYyIsImFsdCIsImhpZGVCaW4iLCJsaWtlc0NvdW50IiwibGVuZ3RoIiwic3R5bGUiLCJkaXNwbGF5IiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjVXAiLCJiaW5kIiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfc3VibWl0QnV0dG9uIiwiX2luaXRpYWxUZXh0IiwiaXNMb2FkaW5nIiwic3VibWl0QnV0dG9uVGV4dCIsIl9pbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJnZXRJbnB1dFZhbHVlcyIsInJlc2V0Iiwic3VibWl0IiwiUG9wdXAiLCJfdGl0bGUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJVc2VySW5mbyIsIl9hYm91dCIsIl9hdmF0YXIiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVBYm91dCIsInByb2ZpbGVBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwiZm9ybVNlbGVjdG9yIiwiYXZhdGFyTW9kYWwiLCJlZGl0TW9kYWwiLCJhZGRNb2RhbCIsImlucHV0TmFtZSIsImlucHV0Sm9iIiwiYXZhdGFyQnV0dG9uIiwiZWRpdEJ1dHRvbiIsImluZm9BdmF0YXIiLCJpbmZvTmFtZSIsImluZm9BYm91dCIsImFkZEJ1dHRvbiIsImFwaSIsImF1dGhvcml6YXRpb24iLCJhdmF0YXJNb2RhbFZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJlZGl0TW9kYWxWYWxpZGF0b3IiLCJhZGRNb2RhbFZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJ1c2VySW5mbyIsInByb2ZpbGVGb3JtIiwicHJvZmlsZSIsImxvYWRpbmciLCJzZXRVc2VySW5mbyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImF2YXRhckZvcm0iLCJkZWxldGVDYXJkTW9kYWwiLCJzZXRFdmVudExpc3RlbmVycyIsIm9wZW4iLCJmaWVsZFN5bmMiLCJwb3B1cFBsYWNlIiwiUG9wdXBXaXRoSW1hZ2UiLCJnZXRBcHBJbmZvIiwiY2FyZHMiLCJwcm9maWxlSWQiLCJyZW5kZXJDYXJkIiwiY3JlYXRlQ2FyZCIsInJlbmRlckl0ZW1zIiwiY2FyZFBvcHVwIiwibmV3Q2FyZCIsInN1Ym1pdEhhbmRsZXIiLCJyZW1vdmVDYXJkIiwiaXNMaWtlZCIsInJlbW92ZUxpa2UiLCJhZGRMaWtlIiwiYWRkSXRlbSIsImdlbmVyYXRlQ2FyZCJdLCJtYXBwaW5ncyI6Im1NQUFxQkEsRSxXQUNuQixjQUFpQyxJQUFuQkMsRUFBbUIsRUFBbkJBLFFBQVNDLEVBQVUsRUFBVkEsUyw0RkFBVSxTQUMvQkMsS0FBS0MsU0FBV0gsRUFDaEJFLEtBQUtFLFNBQVdILEUsbURBR2xCLFNBQWVJLEdBQ2IsT0FBSUEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FHSkMsUUFBUUMsT0FBUixnQkFBd0JKLEVBQUlLLFcsd0JBSXZDLFdBQ0UsT0FBT0YsUUFBUUcsSUFBSSxDQUFDVCxLQUFLVSxjQUFlVixLQUFLVyxzQix5QkFHL0MsV0FDRSxPQUFPQyxNQUFNWixLQUFLQyxTQUFXLFlBQWEsQ0FDeENGLFFBQVNDLEtBQUtFLFdBRWJXLEtBQUtiLEtBQUtjLGtCLHlCQUdmLFNBQVlDLEVBQU1DLEdBQ2hCLE9BQU9KLE1BQU1aLEtBQUtDLFNBQVcsYUFBYyxDQUN6Q2dCLE9BQVEsUUFDUmxCLFFBQVNDLEtBQUtFLFNBQ2RnQixLQUFNQyxLQUFLQyxVQUNUTCxFQUNBQyxLQUdESCxLQUFLYixLQUFLYyxrQiwyQkFHZixZQUEwQixJQUFWTyxFQUFVLEVBQVZBLE9BQ2Qs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QUFDLEdBQUcsT0FBSUMsUUFBUUMsSUFBSUYsUUFFN0IsY0FTSCxTQUFTYyxFQUFXeEgsR0FDbEIsSUFBTTJILEVBQVUsSUFBSTlILEVBQUssQ0FDdkJHLE9BQ0FDLGdCQUFpQixXQUNmaUgsRUFBV0YsS0FBS2hILElBRWxCRSxXQUFZLFNBQUNoRCxHQUNYNEosRUFBZ0JFLE9BRWhCRixFQUFnQmMsZUFBYyxXQUM1QmQsRUFBZ0JQLFNBQVEsRUFBTSxlQUM5QlYsRUFBSWdDLFdBQVczSyxHQUNaWixNQUFLLFdBQ0pxTCxFQUFRRSxhQUNSZixFQUFnQlAsU0FBUSxHQUN4Qk8sRUFBZ0JoRSxXQUVuQjJELE9BQU0sU0FBQUMsR0FBRyxPQUFJQyxRQUFRQyxJQUFJRixVQUk5QnRHLFVBQVcsU0FBQ2xELEdBQ055SyxFQUFRRyxVQUNWakMsRUFBSWtDLFdBQVc3SyxHQUNaWixNQUFLLFNBQUNWLEdBQ0wrTCxFQUFRdEYsV0FBV3pHLEVBQUlvRixNQUFNc0IsUUFDN0JxRixFQUFRSSxnQkFFVHRCLE9BQU0sU0FBQUMsR0FBRyxPQUFJQyxRQUFRQyxJQUFJRixNQUU1QmIsRUFBSW1DLFFBQVE5SyxHQUNUWixNQUFLLFNBQUNWLEdBQ0wrTCxFQUFRdEYsV0FBV3pHLEVBQUlvRixNQUFNc0IsUUFDN0JxRixFQUFRSyxhQUVUdkIsT0FBTSxTQUFBQyxHQUFHLE9BQUlDLFFBQVFDLElBQUlGLFFBRy9CLGdCQUFpQlksR0FDcEJDLEVBQVdVLFFBQVFOLEVBQVFPLGdCQTlDN0JSLEVBQVVYLG9CQUVWbkIsbUJBQTJCLFNBQVMsV0FDbEM4QixFQUFVVixPQUNWVSxFQUFVbkIsU0FBUSxTQTZDckJFLE9BQU0sU0FBQUMsR0FBRyxPQUFJQyxRQUFRQyxJQUFJRixNIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnN9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKVxuICAgICAgLyoudGhlbigocmVzdWx0KSA9PiBjb25zb2xlLmxvZyhyZXN1bHQpKSovXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfWApO1xuICAgIH1cbiAgfVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKVxuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL3VzZXJzL21lJywge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArICcvdXNlcnMvbWUvJywge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KFxuICAgICAgICBuYW1lLFxuICAgICAgICBhYm91dFxuICAgICAgKVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG5cbiAgc2V0VXNlckF2YXRhcih7IGF2YXRhciB9KSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL3VzZXJzL21lL2F2YXRhcicsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhclxuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArICcvY2FyZHMnLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXG4gIH1cblxuICBuZXdDYXJkKHsgdGl0bGUsIHVybCB9KSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzJywge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiB0aXRsZSxcbiAgICAgICAgbGluazogdXJsXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG5cbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArICcvY2FyZHMvJyArIGNhcmRJZCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ0RFTEVURSdcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzL2xpa2VzLycgKyBjYXJkSWQsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXG4gIH1cblxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcy9saWtlcy8nICsgY2FyZElkLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG59XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcblxuICBjb25zdHJ1Y3RvcihkZWZhdWx0Rm9ybUNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9kZWZhdWx0Rm9ybUNvbmZpZyA9IGRlZmF1bHRGb3JtQ29uZmlnLFxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQsXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2RlZmF1bHRGb3JtQ29uZmlnLmlucHV0U2VsZWN0b3IpKSxcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9kZWZhdWx0Rm9ybUNvbmZpZy5mb3JtU3VibWl0KVxufTtcblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZGVmYXVsdEZvcm1Db25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9kZWZhdWx0Rm9ybUNvbmZpZy5lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RlZmF1bHRGb3JtQ29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZGVmYXVsdEZvcm1Db25maWcuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgfSk7XG4gICAgfTtcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5hYmxlQnV0dG9uKClcbiAgICB9XG4gIH07XG5cbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZGVmYXVsdEZvcm1Db25maWcuZm9ybVN1Ym1pdEluYWN0aXZlKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZGVmYXVsdEZvcm1Db25maWcuZm9ybVN1Ym1pdEluYWN0aXZlKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KVxuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkSW1hZ2UsIGNhcmREZWxldGUsIGRlbGV0ZU1vZGFsLCBsaWtlT3duZXIgfSwgY2FyZFRlbXBsYXRlLCB1c2VySWQpIHtcblxuICAgIHRoaXMuX2xpa2VPd25lciA9IGxpa2VPd25lcixcbiAgICB0aGlzLl9oYW5kbGVDYXJkSW1hZ2UgPSBoYW5kbGVDYXJkSW1hZ2UsXG4gICAgdGhpcy5fY2FyZERlbGV0ZSA9IGNhcmREZWxldGUsXG4gICAgdGhpcy5fZGVsZXRlTW9kYWwgPSBkZWxldGVNb2RhbCxcbiAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBjYXJkVGVtcGxhdGUsXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpLFxuXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkLFxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbmssXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZSxcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXMsXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZCxcbiAgICB0aGlzLl9vd25lciA9IGRhdGEub3duZXIsXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKSxcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2NhcHRpb25cIiksXG4gICAgdGhpcy5fY2FyZExpa2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtaWNvblwiKSxcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZVwiKSxcbiAgICB0aGlzLmNhcmRMaWtlQWN0aXZlID0gXCJjYXJkX19saWtlLWljb25fYWN0aXZlXCJcbiAgfTtcblxuICBnZXRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG4gIH1cblxuICBsaWtlT3duZXIoKSB7XG4gICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoKGxpa2VzKSA9PiBsaWtlcy5faWQgPT09IHRoaXMuX3VzZXJJZCkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QuYWRkKHRoaXMuY2FyZExpa2VBY3RpdmUpXG4gICAgfVxuICB9XG5cbiAgbGlrZXNDb3VudCh0b3RhbCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1jb3VudFwiKS50ZXh0Q29udGVudCA9IHRvdGFsO1xuICB9XG5cbiAgaGFuZGxlQ2FyZExpa2UoKSB7XG4gICAgdGhpcy5fY2FyZExpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2xpa2VPd25lcih0aGlzLmdldElkKCkpXG4gICAgfSlcbiAgfVxuXG4gIGlzTGlrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRMaWtlLmNsYXNzTGlzdC5jb250YWlucyh0aGlzLmNhcmRMaWtlQWN0aXZlKVxuICB9XG5cbiAgLy9UZW1wbGF0ZSBzdHJ1Y3R1cmUvL1xuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFRlbXBsYXRlKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50XG4gIH1cblxuICAvL0xpc3RlbmVycy8vXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgLy9DYXJkIHpvb20gaGFuZGxpbmcvL1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZEltYWdlKClcbiAgICB9KTtcbiAgICAvL0NhcmQgZGVsZXRlIGhhbmRsaW5nLy9cbiAgICB0aGlzLmhhbmRsZUNhcmREZWxldGUoKTtcbiAgICAvL0xpa2UgYnV0dG9uIG1hbmFnZW1lbnQvL1xuICAgIHRoaXMuaGFuZGxlQ2FyZExpa2UoKVxuICB9XG5cbiAgLy9SZW1vdmUgY2FyZC8vXG4gIHJlbW92ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKFwiLmNhcmRcIilcbiAgfVxuXG4gIC8vcG9wdXAgY29uZmlybWF0aW9uIG1hZGFsLy9cbiAgIGhhbmRsZUNhcmREZWxldGUoKSB7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fY2FyZERlbGV0ZSh0aGlzLmdldElkKCkpXG4gICAgfSlcbiAgfVxuXG4gIC8vRGlzcGxheSB0ZW1wbGF0ZS8vXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuXG4gICAgLy9DYXJkIGxpa2UgaGFuZGxpbmcvL1xuICAgIHRoaXMuaGFuZGxlQ2FyZExpa2UoKTtcbiAgICAvL2hpZGUgYmluIGJ1dHRvbi8vXG4gICAgdGhpcy5oaWRlQmluKCk7XG4gICAgLy9pbmNyZWFzZSAvIGRlY3JlYXNlIGxpa2VzIGNvdW50Ly9cbiAgICB0aGlzLmxpa2VzQ291bnQodGhpcy5fbGlrZXMubGVuZ3RoKTtcbiAgICAvL2hpZ2hsaWdodGluZyBteSBsaWtlcy8vXG4gICAgdGhpcy5saWtlT3duZXIoKTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50XG4gIH07XG5cbiAgYWRkTGlrZSgpIHtcbiAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QuYWRkKHRoaXMuY2FyZExpa2VBY3RpdmUpXG4gIH1cblxuICByZW1vdmVMaWtlKCkge1xuICAgIHRoaXMuX2NhcmRMaWtlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jYXJkTGlrZUFjdGl2ZSlcbiAgfVxuXG4gIGhpZGVCaW4oKSB7XG4gICAgaWYgKHRoaXMuX293bmVyLl9pZCAhPT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZVwiKTtcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICB9XG4gIH1cbn1cblxuIiwiY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NVcCA9IHRoaXMuX2hhbmRsZUVzY1VwLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRXNjVXAoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgcmV0dXJuIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIikgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSkge1xuICAgICAgcmV0dXJuICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlblwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjVXApO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NVcCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBoYW5kbGVGb3JtU3VibWl0IH0sIHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKSxcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdCxcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpLFxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpLFxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3NhdmVcIiksXG4gICAgdGhpcy5faW5pdGlhbFRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnRcbiAgfTtcblxuICAvL2xvYWRpbmcgc3RhdGUvL1xuICBsb2FkaW5nKGlzTG9hZGluZywgc3VibWl0QnV0dG9uVGV4dD1cIlNhdmluZy4uLlwiKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gc3VibWl0QnV0dG9uVGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5faW5pdGlhbFRleHQ7XG4gICAgfVxuICB9XG5cbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+ICh0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKSk7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzXG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfTtcblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpXG4gIH07XG5cbiAgc3VibWl0SGFuZGxlcihzdWJtaXQpIHtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gc3VibWl0XG4gIH1cbn07XG5cblxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL3BvcHVwLmpzXCJcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9saW5rID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2UtbW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2UtbW9kYWxfX2NhcHRpb25cIik7XG4gIH1cblxuICBvcGVuKHtsaW5rLCBuYW1lfSkge1xuICAgIHRoaXMuX2xpbmsuc3JjID0gbGluaztcbiAgICB0aGlzLl9saW5rLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlXG4iLCJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBkYXRhO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHtjb250YWluZXJTZWxlY3Rvcn1gKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIC8qdGhpcy5jbGVhcigpOyovXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHtuYW1lLCBhYm91dCwgYXZhdGFyfSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lLFxuICAgIHRoaXMuX2Fib3V0ID0gYWJvdXQsXG4gICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyXG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4geyBwcm9maWxlTmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCwgcHJvZmlsZUFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudCwgcHJvZmlsZUF2YXRhcjogdGhpcy5fYXZhdGFyLnNyY307XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCwgYXZhdGFyKSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICB0aGlzLnNldFVzZXJBdmF0YXIoe2F2YXRhcn0pXG4gIH07XG5cbiAgc2V0VXNlckF2YXRhcih7YXZhdGFyfSkge1xuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XG4gIH1cbn1cbiIsIi8vZGVmYXVsdCBjb25mIGZvciBmb3JtdmFsaWRhdG9yIGxvYWQvL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRGb3JtQ29uZmlnID0ge1xuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cFwiLFxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcbiAgZm9ybVN1Ym1pdDogXCIuZm9ybV9fc2F2ZVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxuICBmb3JtU3VibWl0SW5hY3RpdmU6IFwiZm9ybV9fc2F2ZV9pbmFjdGl2ZVwiXG59O1xuXG5leHBvcnQgY29uc3QgUGxhY2VNb2RhbEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZS1tb2RhbF9faW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcGxhY2VNb2RhbENhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlLW1vZGFsX19jYXB0aW9uXCIpO1xuXG5leHBvcnQgY29uc3QgYXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmF2YXRhci1tb2RhbFwiKVxuZXhwb3J0IGNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBhZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZWxldGUtbW9kYWxcIik7XG5cbmV4cG9ydCBjb25zdCBpbnB1dEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfYXZhdGFyXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBpbnB1dEpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfam9iXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1TdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3NhdmVcIik7XG5cbmV4cG9ydCBjb25zdCBwbGFjZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZS1tb2RhbFwiKTtcblxuZXhwb3J0IGNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBpbmZvQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5leHBvcnQgY29uc3QgaW5mb05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5leHBvcnQgY29uc3QgaW5mb0Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hYm91dFwiKTtcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmV4cG9ydCBjb25zdCBwb3B1cE1hcmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwXCIpXG5cbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRUZW1wbGF0ZVwiKTtcbmV4cG9ydCBjb25zdCBkZWZhdWx0Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcbmV4cG9ydCBjb25zdCBjYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fY2FwdGlvblwiKTtcbmV4cG9ydCBjb25zdCBjYXJkRGVsZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGVcIik7XG5cbmV4cG9ydCBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XG5cblxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvYXBpLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC13aXRoLWZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC13aXRoLWltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7XG4gIGRlZmF1bHRGb3JtQ29uZmlnLFxuICBlZGl0TW9kYWwsXG4gIGF2YXRhckJ1dHRvbixcbiAgZWRpdEJ1dHRvbixcbiAgaW5mb0F2YXRhcixcbiAgYWRkTW9kYWwsXG4gIGFkZEJ1dHRvbixcbiAgYXZhdGFyTW9kYWwsXG4gIGRlbGV0ZU1vZGFsLFxuICBpbmZvTmFtZSxcbiAgaW5mb0Fib3V0LFxuICBpbnB1dEpvYixcbiAgaW5wdXROYW1lXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy9BVEhFTlRJQ0FUSU9OLy9cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMycsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjRiOWJiMzE2LTZjMTItNDYxZi04NmEzLTc2ZTZhZjczMjViYVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gIH1cbn0pO1xuXG4vL2F2YXRhciBmb3JtIGZpZWxkIHZhbGlkYXRpb24gaGFuZGxpbmcvL1xuY29uc3QgYXZhdGFyTW9kYWxWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihkZWZhdWx0Rm9ybUNvbmZpZywgYXZhdGFyTW9kYWwpO1xuLy9wcm9maWxlIGZvcm0gZmllbGRzIHZhbGlkYXRpb24gaGFuZGxpbmcvL1xuY29uc3QgZWRpdE1vZGFsVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZGVmYXVsdEZvcm1Db25maWcsIGVkaXRNb2RhbCk7XG4vL2NhcmQgZm9ybSBmaWVsZHMgdmFsaWRhdGlvbiBoYW5kbGluZy8vXG5jb25zdCBhZGRNb2RhbFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGRlZmF1bHRGb3JtQ29uZmlnLCBhZGRNb2RhbCk7XG5cbi8vZm9ybXMgdmFsaWRhdGlvbiBjaGVjay8vXG5lZGl0TW9kYWxWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkTW9kYWxWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYXZhdGFyTW9kYWxWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vL3Byb2ZpbGUgbWF0Y2gvL1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oeyBuYW1lOiBpbmZvTmFtZSwgYWJvdXQ6IGluZm9BYm91dCwgYXZhdGFyOiBpbmZvQXZhdGFyIH0pXG5cbi8vZWRpdCBtb2RhbCB1c2VyIGRhdGEvL1xuY29uc3QgcHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChwcm9maWxlKSA9PiB7XG4gICAgICBwcm9maWxlRm9ybS5sb2FkaW5nKHRydWUpXG4gICAgICBhcGkuc2V0VXNlckluZm8oe1xuICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUsXG4gICAgICAgIGFib3V0OiBwcm9maWxlLmFib3V0LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQsIHJlcy5hdmF0YXIpO1xuICAgICAgICBwcm9maWxlRm9ybS5sb2FkaW5nKGZhbHNlLCBcImxvYWRlZCEhIVwiKTtcbiAgICAgICAgcHJvZmlsZUZvcm0uY2xvc2UoKVxuICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuICB9XG59LCBcIi5lZGl0LW1vZGFsXCIpXG5cbi8vcG9wdXAgYXZhdGFyIGRhdGEvL1xuY29uc3QgYXZhdGFyRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKHByb2ZpbGUpID0+IHtcbiAgICBhdmF0YXJGb3JtLmxvYWRpbmcodHJ1ZSlcbiAgICAgIGFwaS5zZXRVc2VyQXZhdGFyKHtcbiAgICAgICAgYXZhdGFyOiBwcm9maWxlLmF2YXRhclxuICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocmVzKVxuICAgICAgYXZhdGFyRm9ybS5sb2FkaW5nKGZhbHNlLCBcImxvYWRlZCEhIVwiKTtcbiAgICAgIGF2YXRhckZvcm0uY2xvc2UoKVxuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfVxufSwgXCIuYXZhdGFyLW1vZGFsXCIpXG5cbi8vcG9wdXAgZGVsZXRlIHdpbmRvdy8vXG5jb25zdCBkZWxldGVDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7fSwgXCIuZGVsZXRlLW1vZGFsXCIpXG5cbmRlbGV0ZUNhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5hdmF0YXJGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vYXZhdGFyIGZvcm0vL1xuYXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGF2YXRhckZvcm0ub3BlbigpO1xuICBhdmF0YXJGb3JtLmxvYWRpbmcoZmFsc2UpXG59KVxuXG4vL2VkaXQgcHJvZmlsZSBmb3JtLy9cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICBwcm9maWxlRm9ybS5vcGVuKClcbiAgcHJvZmlsZUZvcm0ubG9hZGluZyhmYWxzZSlcbiAgY29uc3QgZmllbGRTeW5jID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgaW5wdXROYW1lLnZhbHVlID0gZmllbGRTeW5jLnByb2ZpbGVOYW1lO1xuICBpbnB1dEpvYi52YWx1ZSA9IGZpZWxkU3luYy5wcm9maWxlQWJvdXQ7XG59KVxuXG4vL2NhcmQgem9vbS8vXG5jb25zdCBwb3B1cFBsYWNlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBsYWNlLW1vZGFsXCIpO1xuXG5wb3B1cFBsYWNlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vY2FyZCB0ZW1wbGF0ZS8vXG5hcGkuZ2V0QXBwSW5mbygpXG4gIC50aGVuKChbcHJvZmlsZSwgY2FyZHNdKSA9PiB7XG4gICAgY29uc3QgcHJvZmlsZUlkID0gcHJvZmlsZS5faWQ7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZS5uYW1lLCBwcm9maWxlLmFib3V0KTtcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHByb2ZpbGUpO1xuICAgIGNvbnN0IHJlbmRlckNhcmQgPSBuZXcgU2VjdGlvbih7XG4gICAgICBkYXRhOiBjYXJkcyxcbiAgICAgIHJlbmRlcmVyOiBjcmVhdGVDYXJkXG4gICAgfSwgXCIuZWxlbWVudHNcIilcblxuICAgIHJlbmRlckNhcmQucmVuZGVySXRlbXMoKTtcblxuICAgIGNvbnN0IGNhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgICAgIGNhcmRQb3B1cC5sb2FkaW5nKHRydWUpO1xuICAgICAgICBhcGkubmV3Q2FyZChkYXRhKVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGNyZWF0ZUNhcmQocmVzKSxcbiAgICAgICAgICAgIGNhcmRQb3B1cC5sb2FkaW5nKGZhbHNlLCBcIlNhdmVkXCIpLFxuICAgICAgICAgICAgY2FyZFBvcHVwLmNsb3NlKClcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgICB9XG4gICAgfSwgXCIuYWRkLW1vZGFsXCIpXG5cbiAgICBjYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY2FyZFBvcHVwLm9wZW4oKTtcbiAgICAgIGNhcmRQb3B1cC5sb2FkaW5nKGZhbHNlKTtcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XG4gICAgICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoe1xuICAgICAgICBkYXRhLFxuICAgICAgICBoYW5kbGVDYXJkSW1hZ2U6ICgpID0+IHtcbiAgICAgICAgICBwb3B1cFBsYWNlLm9wZW4oZGF0YSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhcmREZWxldGU6IChjYXJkSWQpID0+IHtcbiAgICAgICAgICBkZWxldGVDYXJkTW9kYWwub3BlbigpO1xuXG4gICAgICAgICAgZGVsZXRlQ2FyZE1vZGFsLnN1Ym1pdEhhbmRsZXIoKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlQ2FyZE1vZGFsLmxvYWRpbmcodHJ1ZSwgXCJEZWxldGluZy4uLlwiKTtcbiAgICAgICAgICAgIGFwaS5yZW1vdmVDYXJkKGNhcmRJZClcbiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ld0NhcmQucmVtb3ZlQ2FyZCgpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZUNhcmRNb2RhbC5sb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBkZWxldGVDYXJkTW9kYWwuY2xvc2UoKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0sXG5cbiAgICAgICAgbGlrZU93bmVyOiAoY2FyZElkKSA9PiB7XG4gICAgICAgICAgaWYgKG5ld0NhcmQuaXNMaWtlZCgpKSB7XG4gICAgICAgICAgICBhcGkucmVtb3ZlTGlrZShjYXJkSWQpXG4gICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBuZXdDYXJkLmxpa2VzQ291bnQocmVzLmxpa2VzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgbmV3Q2FyZC5yZW1vdmVMaWtlKClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcGkuYWRkTGlrZShjYXJkSWQpXG4gICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBuZXdDYXJkLmxpa2VzQ291bnQocmVzLmxpa2VzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgbmV3Q2FyZC5hZGRMaWtlKClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgXCIjY2FyZFRlbXBsYXRlXCIsIHByb2ZpbGVJZCk7XG4gICAgICByZW5kZXJDYXJkLmFkZEl0ZW0obmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKSlcbiAgICB9O1xuICB9KVxuICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==